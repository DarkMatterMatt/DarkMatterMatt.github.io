<!DOCTYPE html>
<html>
<head>
	<title>Home | DMM</title>
	<link rel="stylesheet" type="text/css" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<style>
		#main .material-icons {
			font-size: 1em;
			vertical-align: middle;
			color: #d3a519;
		}
	</style>
</head>
<body>
	<div id="main" class="w3-responsive">
		<table class="w3-table w3-striped w3-bordered w3-hoverable">
			<thead>
				<tr class="w3-green">
					<th>Page</th>
					<th>Description</th>
				</tr>
			</thead>
			<tbody>
				<!-- tbody populated using JavaScript -->
			</tbody>
		</table>
	</div>
	<script>
		"use strict";
		const PAGES = {
			infinite_history: 	["Infinite History", "Browser navigation doesn't seem to work anymore... ;)", "work in progress"],
			library:			["Library Browsing History Converter", "Convert text formatted browsing history to a format that can be imported to a spreadsheet"]
		};

		// creates a exclamation mark to display next to WIP pages
		function makeWIPIcon() {
			var wip = document.createElement("i");
			wip.setAttribute("class", "material-icons");
			wip.setAttribute("title", "Work in progress");
			wip.appendChild(document.createTextNode("warning"));
			return wip;
		}

		// loop through pages, generate table rows for each page
		const table = document.querySelector("#main>table>tbody");
		for (let link in PAGES) {
			let [name, descriptionText, workInProgress] = PAGES[link];

			// make table row and table data elements and add them to the table
			const row = document.createElement("tr");
			const page = document.createElement("td");
			const desc = document.createElement("td");
			row.appendChild(page);
			row.appendChild(desc);
			table.appendChild(row);

			// if it's WIP then add the exclamation mark, then a space before the name
			if (workInProgress) {
				page.appendChild(makeWIPIcon());
				name = " " + name;
			}

			// add text
			page.appendChild(document.createTextNode(name));
			desc.appendChild(document.createTextNode(descriptionText));

			// make row clickable to the link
			row.setAttribute("href", link);
			row.setAttribute("style", "cursor: pointer");
			row.addEventListener("click", () => {
				window.location = link;
			});
		}
	</script>
</body>
</html>
